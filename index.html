<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Bill Layne Insurance - Document Generator & Resources</title>
  <link rel="stylesheet" href="css/styles.css">
  <!-- PDF.js for PDF viewing (optional) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  
  <!-- Authentication Check -->
  <script>
    // Check if user is authenticated
    if (sessionStorage.getItem('authenticated') !== 'true') {
      // Redirect to login page
      window.location.href = 'login.html';
    }
  </script>
</head>
<body>
  <!-- Navigation Tabs -->
  <div class="navigation-tabs">
    <button class="tab-button active" onclick="showTab('generator')">Document Generator</button>
    <button class="tab-button" onclick="showTab('templates')">PDF Templates</button>
    <button class="tab-button" onclick="showTab('resources')">Resources</button>
    <button class="tab-button" onclick="showTab('prompts')">Prompt Manager</button>
    <button class="tab-button" onclick="logout()" style="float: right; background: linear-gradient(180deg, #e74c3c 0%, #c0392b 100%); border-color: #a93226;">Logout</button>
  </div>

  <!-- Document Generator Tab (main content) -->
  <div id="generator-tab" class="tab-content active">
    <div class="form-container">
      <h2>Insurance Document Generator - Multi-Template</h2>
      
      <!-- Template Selector -->
      <div class="template-selector">
        <label for="documentType">Select Document Type:</label>
        <select id="documentType" onchange="switchTemplate()">
          <option value="closing">Home Closing Package (Declaration & Invoice)</option>
          <option value="binder">Binder Letter</option>
          <option value="mortgagee-change">Mortgagee Change Letter</option>
          <option value="cancellation">Cancellation Notice</option>
          <option value="renewal">Renewal Notice</option>
          <option value="coverage-change">Coverage Change Confirmation</option>
          <option value="payment-receipt">Payment Receipt</option>
          <option value="claim-info">Claim Information Sheet</option>
          <option value="dl123">DL-123 Driver License Insurance Certification</option>
          <option value="underwriting">Underwriting Email Template</option>
          <option value="letterhead">Professional Letterhead</option>
          <option value="envelope">Envelope</option>
          <option value="auto-id-card">Auto ID Card Maker</option>
        </select>
      </div>

      <!-- Template Description -->
      <div id="templateDescription" class="template-description">
        Select a document type above to begin. Each template is designed for specific insurance documentation needs.
      </div>
      
      <!-- Save/Load buttons -->
      <div class="no-print" style="text-align: right; margin-bottom: 20px;">
        <button type="button" onclick="saveFormData()" class="save-btn">üíæ Save Form Data</button>
        <button type="button" onclick="loadFormData()" class="load-btn">üìÇ Load Saved Data</button>
        <button type="button" onclick="clearForm()" class="clear-btn">üóëÔ∏è Clear Form</button>
      </div>

      <!-- Common Fields Section (shown for all templates) -->
      <div class="form-section active" id="commonFields">
        <div class="section-title">Agency & Company Information</div>
        <div class="form-row">
          <div class="form-group">
            <label>Insurance Company</label>
            <select id="insuranceCompany" onchange="updateAgencyCodeDL123()">
              <option value="">Select Company</option>
              <option value="Nationwide">Nationwide</option>
              <option value="Progressive">Progressive</option>
              <option value="National General">National General</option>
              <option value="Alamance">Alamance</option>
              <option value="Travelers">Travelers</option>
              <option value="NC Grange Mutual">NC Grange Mutual</option>
              <option value="Universal Property">Universal Property</option>
              <option value="Dairyland">Dairyland</option>
              <option value="Allstate">Allstate</option>
              <option value="Foremost">Foremost</option>
              <option value="JSA">JSA</option>
              <option value="NCJUA">NCJUA</option>
            </select>
          </div>
          <div class="form-group">
            <label>Policy Number</label>
            <input type="text" id="policyNumber" />
          </div>
        </div>
      </div>

      <!-- Insured Information (most templates) -->
      <div class="form-section" id="insuredSection">
        <div class="section-title">Insured Information</div>
        <div class="form-row">
          <div class="form-group">
            <label>Policyholder Name</label>
            <input type="text" id="policyholderName" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Address Line 1</label>
            <input type="text" id="addressLine1" />
          </div>
          <div class="form-group">
            <label>Address Line 2</label>
            <input type="text" id="addressLine2" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>City</label>
            <input type="text" id="city" />
          </div>
          <div class="form-group">
            <label>State</label>
            <input type="text" id="state" value="NC" />
          </div>
          <div class="form-group">
            <label>ZIP Code</label>
            <input type="text" id="zipCode" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Phone Number</label>
            <input type="tel" id="phoneNumber" />
          </div>
          <div class="form-group">
            <label>Email</label>
            <input type="email" id="emailAddress" />
          </div>
        </div>
      </div>

      <!-- Policy Dates Section -->
      <div class="form-section" id="policyDatesSection">
        <div class="section-title">Policy Dates</div>
        <div class="form-row">
          <div class="form-group">
            <label>Effective Date</label>
            <input type="date" id="effectiveDate" onchange="updateExpirationDate()" />
          </div>
          <div class="form-group">
            <label>Expiration Date</label>
            <input type="date" id="expirationDate" />
          </div>
        </div>
      </div>

      <!-- Coverage Information (for closing, binder, renewal, coverage change) -->
      <div class="form-section" id="coverageSection">
        <div class="section-title">Coverage Information</div>
        <div class="form-row">
          <div class="form-group">
            <label>Coverage A - Dwelling</label>
            <input type="number" id="coverageA" min="0" step="1000" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Deductible</label>
            <input type="number" id="deductible" min="0" step="100" />
          </div>
          <div class="form-group">
            <label>Annual Premium</label>
            <input type="number" id="annualPremium" min="0" step="0.01" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Wind and Hail Deductible</label>
            <input type="text" id="windHailDeductible" placeholder="e.g., 1% or $2500" />
          </div>
          <div class="form-group">
            <label>Replacement Cost</label>
            <select id="replacementCost">
              <option value="100%">100%</option>
              <option value="125%">125%</option>
              <option value="150%">150%</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Mortgage Information -->
      <div class="form-section" id="mortgageeSection">
        <div class="section-title">Mortgage Information</div>
        <div class="form-row">
          <div class="form-group">
            <label>Mortgagee Name</label>
            <input type="text" id="mortgageeName" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Mortgagee Address Line 1</label>
            <input type="text" id="mortgageeAddressLine1" />
          </div>
          <div class="form-group">
            <label>Mortgagee Address Line 2</label>
            <input type="text" id="mortgageeAddressLine2" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>City</label>
            <input type="text" id="mortgageeCity" />
          </div>
          <div class="form-group">
            <label>State</label>
            <input type="text" id="mortgageeState" value="NC" />
          </div>
          <div class="form-group">
            <label>ZIP Code</label>
            <input type="text" id="mortgageeZipCode" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Loan Number</label>
            <input type="text" id="loanNumber" />
          </div>
        </div>
      </div>

      <!-- Attorney Information (for closing) -->
      <div class="form-section" id="attorneySection">
        <div class="section-title">Closing Attorney Information</div>
        <div class="form-row">
          <div class="form-group">
            <label>Attorney/Law Firm Name</label>
            <input type="text" id="attorneyName" />
          </div>
          <div class="form-group">
            <label>Email</label>
            <input type="email" id="attorneyEmail" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Address Line 1</label>
            <input type="text" id="attorneyAddressLine1" />
          </div>
          <div class="form-group">
            <label>Address Line 2</label>
            <input type="text" id="attorneyAddressLine2" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>City</label>
            <input type="text" id="attorneyCity" />
          </div>
          <div class="form-group">
            <label>State</label>
            <input type="text" id="attorneyState" value="NC" />
          </div>
          <div class="form-group">
            <label>ZIP Code</label>
            <input type="text" id="attorneyZipCode" />
          </div>
        </div>
      </div>

      <!-- Cancellation Specific Fields -->
      <div class="form-section" id="cancellationSection">
        <div class="section-title">Cancellation Details</div>
        <div class="form-row">
          <div class="form-group">
            <label>Cancellation Date</label>
            <input type="date" id="cancellationDate" />
          </div>
          <div class="form-group">
            <label>Cancellation Reason</label>
            <select id="cancellationReason">
              <option value="">Select Reason</option>
              <option value="nonpayment">Non-Payment</option>
              <option value="insured-request">Insured Request</option>
              <option value="underwriting">Underwriting Decision</option>
              <option value="sold">Property Sold</option>
              <option value="other">Other</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group full-width">
            <label>Additional Notes</label>
            <textarea id="cancellationNotes" rows="3"></textarea>
          </div>
        </div>
      </div>

      <!-- Renewal Specific Fields -->
      <div class="form-section" id="renewalSection">
        <div class="section-title">Renewal Information</div>
        <div class="form-row">
          <div class="form-group">
            <label>Current Premium</label>
            <input type="number" id="currentPremium" min="0" step="0.01" />
          </div>
          <div class="form-group">
            <label>Renewal Premium</label>
            <input type="number" id="renewalPremium" min="0" step="0.01" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Renewal Date</label>
            <input type="date" id="renewalDate" />
          </div>
          <div class="form-group">
            <label>Payment Due Date</label>
            <input type="date" id="paymentDueDate" />
          </div>
        </div>
      </div>

      <!-- Coverage Change Fields -->
      <div class="form-section" id="coverageChangeSection">
        <div class="section-title">Coverage Change Details</div>
        <div class="form-row">
          <div class="form-group full-width">
            <label>Change Description</label>
            <textarea id="changeDescription" rows="3" placeholder="Describe the coverage changes..."></textarea>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Previous Premium</label>
            <input type="number" id="previousPremium" min="0" step="0.01" />
          </div>
          <div class="form-group">
            <label>New Premium</label>
            <input type="number" id="newPremium" min="0" step="0.01" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Change Effective Date</label>
            <input type="date" id="changeEffectiveDate" />
          </div>
        </div>
      </div>

      <!-- Payment Receipt Fields -->
      <div class="form-section" id="paymentSection">
        <div class="section-title">Payment Information</div>
        <div class="form-row">
          <div class="form-group">
            <label>Payment Amount</label>
            <input type="number" id="paymentAmount" min="0" step="0.01" />
          </div>
          <div class="form-group">
            <label>Payment Date</label>
            <input type="date" id="paymentDate" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Payment Method</label>
            <select id="paymentMethod">
              <option value="">Select Method</option>
              <option value="check">Check</option>
              <option value="cash">Cash</option>
              <option value="card">Credit/Debit Card</option>
              <option value="eft">Electronic Transfer</option>
              <option value="escrow">Escrow Payment</option>
            </select>
          </div>
          <div class="form-group">
            <label>Reference Number</label>
            <input type="text" id="referenceNumber" placeholder="Check # or Transaction ID" />
          </div>
        </div>
      </div>

      <!-- Claim Information Fields -->
      <div class="form-section" id="claimSection">
        <div class="section-title">Claim Contact Information</div>
        <div class="form-row">
          <div class="form-group">
            <label>Claim Phone Number</label>
            <input type="tel" id="claimPhone" />
          </div>
          <div class="form-group">
            <label>Claim Email</label>
            <input type="email" id="claimEmail" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group full-width">
            <label>Special Instructions</label>
            <textarea id="claimInstructions" placeholder="Enter any special claim filing instructions..."></textarea>
          </div>
        </div>
      </div>

      <!-- DL-123 Specific Fields -->
      <div class="form-section" id="dl123Section">
        <div class="section-title">DL-123 Driver Information</div>
        <div class="form-row">
          <div class="form-group">
            <label>Insured Driver Name</label>
            <input type="text" id="insuredDriverName" />
          </div>
          <div class="form-group">
            <label>Date of Birth</label>
            <input type="date" id="driverDateOfBirth" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Agency Code #</label>
            <input type="text" id="agencyCode" />
          </div>
          <div class="form-group">
            <label>Agent Signature Name</label>
            <input type="text" id="agentSignatureName" placeholder="Agent's printed name" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Date of Certification</label>
            <input type="date" id="certificationDate" />
          </div>
        </div>
      </div>

      <!-- Letterhead Specific Fields -->
      <div class="form-section" id="letterheadSection">
        <div class="section-title">Professional Letter Information</div>
        <div class="form-row">
          <div class="form-group">
            <label>Recipient Name</label>
            <input type="text" id="letterRecipientName" placeholder="John Doe" />
          </div>
          <div class="form-group">
            <label>Recipient Company (Optional)</label>
            <input type="text" id="letterRecipientCompany" placeholder="ABC Corporation" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Recipient Address</label>
            <input type="text" id="letterRecipientAddress" placeholder="123 Main Street" />
          </div>
          <div class="form-group">
            <label>City, State ZIP</label>
            <input type="text" id="letterRecipientCityStateZip" placeholder="New York, NY 10001" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Letter Date</label>
            <input type="date" id="letterDate" />
          </div>
          <div class="form-group">
            <label>Letter Subject</label>
            <input type="text" id="letterSubject" placeholder="RE: Insurance Policy Update" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Sender Name</label>
            <input type="text" id="letterSenderName" placeholder="Jane Smith" />
          </div>
          <div class="form-group">
            <label>Sender Position</label>
            <input type="text" id="letterSenderPosition" placeholder="Insurance Agent" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group full-width">
            <label>Letter Content</label>
            <textarea id="letterContent" rows="8" placeholder="Dear [Recipient],

Thank you for your interest in our insurance services. I am writing to provide you with important information regarding your policy...

Please feel free to contact me if you have any questions or need additional information."></textarea>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Closing</label>
            <select id="letterClosing">
              <option value="Sincerely">Sincerely</option>
              <option value="Best Regards">Best Regards</option>
              <option value="Respectfully">Respectfully</option>
              <option value="Thank you">Thank you</option>
              <option value="Cordially">Cordially</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Envelope Specific Fields -->
      <div class="form-section" id="envelopeSection">
        <div class="section-title">Envelope Information</div>
        <div class="form-row">
          <div class="form-group">
            <label>Envelope Size</label>
            <select id="envelopeSize">
              <option value="10">#10 Standard (9.5" √ó 4.125")</option>
              <option value="9">#9 Business (8.875" √ó 3.875")</option>
              <option value="a7">A7 Announcement (7.25" √ó 5.25")</option>
            </select>
          </div>
          <div class="form-group">
            <label>Include Return Address</label>
            <select id="envelopeIncludeReturn">
              <option value="yes">Yes</option>
              <option value="no">No</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group full-width">
            <label>Recipient Address</label>
            <textarea id="envelopeRecipientAddress" rows="4" placeholder="John Doe
123 Main Street
New York, NY 10001"></textarea>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group full-width">
            <label>Return Address (Optional - Leave blank to use default)</label>
            <textarea id="envelopeReturnAddress" rows="3" placeholder="Bill Layne Insurance
PO Box 827
Elkin, NC 28621"></textarea>
          </div>
        </div>
      </div>

      <!-- Underwriting Document Fields -->
      <div class="form-section" id="underwritingSection">
        <div class="section-title">Underwriting Information Request</div>
        <div class="form-row">
          <div class="form-group">
            <label>Insurance Company</label>
            <select id="underwritingCompany">
              <option value="">Select Company</option>
              <option value="Nationwide">Nationwide</option>
              <option value="Progressive">Progressive</option>
              <option value="National General">National General</option>
              <option value="Travelers">Travelers</option>
              <option value="NC Grange Mutual">NC Grange Mutual</option>
              <option value="Alamance">Alamance</option>
              <option value="Universal Property">Universal Property</option>
              <option value="Other">Other</option>
            </select>
          </div>
          <div class="form-group">
            <label>Underwriter Email</label>
            <input type="email" id="underwriterEmail" placeholder="underwriter@insurance.com" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Subject Line</label>
            <input type="text" id="underwritingSubject" placeholder="Underwriting Request - Policy #123456" />
          </div>
          <div class="form-group">
            <label>Policy/Quote Number</label>
            <input type="text" id="underwritingPolicyNumber" placeholder="Enter policy or quote number" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Insured Name</label>
            <input type="text" id="underwritingInsuredName" placeholder="John and Jane Doe" />
          </div>
          <div class="form-group">
            <label>Property Address</label>
            <input type="text" id="underwritingPropertyAddress" placeholder="123 Main St, Elkin, NC 28621" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Request Type</label>
            <select id="underwritingRequestType" onchange="updateUnderwritingTemplate()">
              <option value="new">New Business Quote</option>
              <option value="renewal">Renewal</option>
              <option value="endorsement">Endorsement/Change</option>
              <option value="inspection">Inspection Photos</option>
              <option value="claims">Claims History</option>
              <option value="documentation">Additional Documentation</option>
              <option value="custom">Custom Request</option>
            </select>
          </div>
          <div class="form-group">
            <label>Priority Level</label>
            <select id="underwritingPriority">
              <option value="normal">Normal</option>
              <option value="urgent">Urgent - Closing/Time Sensitive</option>
              <option value="high">High Priority</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group full-width">
            <label>Documents/Information Needed</label>
            <textarea id="underwritingDocumentsNeeded" rows="4" placeholder="Please provide:
- 4-point inspection report
- Wind mitigation form
- Photos of roof (all sides)
- Proof of roof replacement"></textarea>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group full-width">
            <label>Additional Notes/Context</label>
            <textarea id="underwritingNotes" rows="3" placeholder="Any additional information or special circumstances..."></textarea>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Response Needed By</label>
            <input type="date" id="underwritingDeadline" />
          </div>
          <div class="form-group">
            <label>Agent Name</label>
            <input type="text" id="underwritingAgentName" placeholder="Your name" value="Bill Layne" />
          </div>
        </div>
      </div>

      <!-- Auto ID Card Specific Fields -->
      <div class="form-section" id="autoIDCardSection">
        <div class="section-title">Auto Insurance ID Card Information</div>
        <div class="form-row">
          <div class="form-group">
            <label>Insurance Company</label>
            <select id="idCardCompany" onchange="updateIDCardCompanyInfo()">
              <option value="">Select Company</option>
              <option value="Nationwide">Nationwide</option>
              <option value="Progressive">Progressive</option>
              <option value="National General">National General</option>
              <option value="Travelers">Travelers</option>
              <option value="NC Grange Mutual">NC Grange Mutual</option>
              <option value="Alamance">Alamance</option>
              <option value="Universal Property">Universal Property</option>
              <option value="Dairyland">Dairyland</option>
            </select>
          </div>
          <div class="form-group">
            <label>Number of Vehicles</label>
            <select id="idCardVehicleCount" onchange="updateVehicleFields()">
              <option value="1">1 Vehicle</option>
              <option value="2">2 Vehicles</option>
              <option value="3">3 Vehicles</option>
              <option value="4">4 Vehicles</option>
            </select>
          </div>
        </div>
        
        <!-- Vehicle 1 Information -->
        <div id="vehicle1Section">
          <h4 style="color: #004080; margin-top: 20px;">Vehicle 1 Information</h4>
          <div class="form-row">
            <div class="form-group">
              <label>Year</label>
              <input type="text" id="vehicle1Year" placeholder="2024" />
            </div>
            <div class="form-group">
              <label>Make</label>
              <input type="text" id="vehicle1Make" placeholder="Honda" />
            </div>
            <div class="form-group">
              <label>Model</label>
              <input type="text" id="vehicle1Model" placeholder="Accord" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>VIN</label>
              <input type="text" id="vehicle1VIN" placeholder="Vehicle Identification Number" />
            </div>
          </div>
        </div>

        <!-- Vehicle 2 Information (Hidden by default) -->
        <div id="vehicle2Section" style="display: none;">
          <h4 style="color: #004080; margin-top: 20px;">Vehicle 2 Information</h4>
          <div class="form-row">
            <div class="form-group">
              <label>Year</label>
              <input type="text" id="vehicle2Year" placeholder="2024" />
            </div>
            <div class="form-group">
              <label>Make</label>
              <input type="text" id="vehicle2Make" placeholder="Toyota" />
            </div>
            <div class="form-group">
              <label>Model</label>
              <input type="text" id="vehicle2Model" placeholder="Camry" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>VIN</label>
              <input type="text" id="vehicle2VIN" placeholder="Vehicle Identification Number" />
            </div>
          </div>
        </div>

        <!-- Vehicle 3 Information (Hidden by default) -->
        <div id="vehicle3Section" style="display: none;">
          <h4 style="color: #004080; margin-top: 20px;">Vehicle 3 Information</h4>
          <div class="form-row">
            <div class="form-group">
              <label>Year</label>
              <input type="text" id="vehicle3Year" placeholder="2024" />
            </div>
            <div class="form-group">
              <label>Make</label>
              <input type="text" id="vehicle3Make" placeholder="Ford" />
            </div>
            <div class="form-group">
              <label>Model</label>
              <input type="text" id="vehicle3Model" placeholder="F-150" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>VIN</label>
              <input type="text" id="vehicle3VIN" placeholder="Vehicle Identification Number" />
            </div>
          </div>
        </div>

        <!-- Vehicle 4 Information (Hidden by default) -->
        <div id="vehicle4Section" style="display: none;">
          <h4 style="color: #004080; margin-top: 20px;">Vehicle 4 Information</h4>
          <div class="form-row">
            <div class="form-group">
              <label>Year</label>
              <input type="text" id="vehicle4Year" placeholder="2024" />
            </div>
            <div class="form-group">
              <label>Make</label>
              <input type="text" id="vehicle4Make" placeholder="Chevrolet" />
            </div>
            <div class="form-group">
              <label>Model</label>
              <input type="text" id="vehicle4Model" placeholder="Silverado" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>VIN</label>
              <input type="text" id="vehicle4VIN" placeholder="Vehicle Identification Number" />
            </div>
          </div>
        </div>

        <!-- Driver Information -->
        <div class="form-row" style="margin-top: 20px;">
          <div class="form-group">
            <label>Primary Driver Name</label>
            <input type="text" id="idCardDriverName" placeholder="John Doe" />
          </div>
          <div class="form-group">
            <label>Additional Driver (Optional)</label>
            <input type="text" id="idCardAdditionalDriver" placeholder="Jane Doe" />
          </div>
        </div>

        <!-- Policy Information for ID Card -->
        <div class="form-row">
          <div class="form-group">
            <label>Policy Number</label>
            <input type="text" id="idCardPolicyNumber" placeholder="Enter Policy Number" />
          </div>
          <div class="form-group">
            <label>NAIC #</label>
            <input type="text" id="idCardNAIC" placeholder="Auto-filled based on company" readonly style="background-color: #f0f0f0;" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Effective Date</label>
            <input type="date" id="idCardEffectiveDate" />
          </div>
          <div class="form-group">
            <label>Expiration Date</label>
            <input type="date" id="idCardExpirationDate" />
          </div>
        </div>
      </div>

      <div class="button-group">
        <button type="button" onclick="generateDocuments()">Generate Documents</button>
      </div>

      <!-- Preview Section -->
      <div id="previewSection" style="display: none;">
        <h2>Generated Documents</h2>
        <div id="documentPreviewContainer"></div>
      </div>
    </div>
  </div>

  <!-- PDF Templates Tab -->
  <div id="templates-tab" class="tab-content" style="display: none;">
    <div class="pdf-templates-container">
      <h2>PDF Template Library</h2>
      <p style="margin-bottom: 20px;">Browse and download commonly used insurance forms and templates.</p>
      <div class="pdf-category-selector">
        <label for="pdfCategory">Filter by Category:</label>
        <select id="pdfCategory" onchange="loadPDFCategory()">
          <option value="all">All Templates</option>
          <option value="acord">ACORD Forms</option>
          <option value="state">State Forms</option>
          <option value="company">Company Forms</option>
        </select>
      </div>
      <div id="pdfGrid" class="pdf-grid">
        <!-- PDF cards will be dynamically loaded here -->
      </div>
    </div>
  </div>

  <!-- Resources Tab -->
  <div id="resources-tab" class="tab-content" style="display: none;">
    <div class="resources-container">
      <h2>Quick Links & Resources</h2>
      <div class="resource-grid">
        <div class="resource-card">
          <h4>üìû Contact Information</h4>
          <p><strong>Bill Layne Insurance Agency</strong><br>
          1283 N Bridge St<br>
          Elkin, NC 28621<br>
          Phone: (336) 835-1993<br>
          Email: Save@BillLayneInsurance.com</p>
        </div>
        
        <div class="resource-card">
          <h4>üè¢ Insurance Companies</h4>
          <p>Quick links to carrier websites:</p>
          <ul style="list-style: none; padding: 0;">
            <li><a href="https://www.nationwide.com" target="_blank">Nationwide</a></li>
            <li><a href="https://www.progressive.com" target="_blank">Progressive</a></li>
            <li><a href="https://www.travelers.com" target="_blank">Travelers</a></li>
            <li><a href="https://www.nationalgeneral.com" target="_blank">National General</a></li>
          </ul>
        </div>
        
        <div class="resource-card">
          <h4>üìã NC DMV Resources</h4>
          <p>North Carolina DMV forms and information:</p>
          <ul style="list-style: none; padding: 0;">
            <li><a href="https://www.ncdot.gov/dmv" target="_blank">NC DMV Website</a></li>
            <li><a href="https://www.ncdot.gov/dmv/insurance" target="_blank">Insurance Requirements</a></li>
            <li><a href="https://www.ncdot.gov/dmv/forms" target="_blank">DMV Forms</a></li>
            <li><a href="https://vehicle-search.ncshp.org/accidents" target="_blank">NC Highway Patrol Crash Reports</a></li>
            <li><a href="https://payments.ncdot.gov/" target="_blank">Pay DMV Fines</a></li>
          </ul>
        </div>
        
        <div class="resource-card">
          <h4>üìß Company Email Addresses</h4>
          <p>Important email contacts for submissions:</p>
          <ul style="list-style: none; padding: 0;">
            <li><strong>NC Grange Underwriting:</strong><br>
                <a href="mailto:data4apps@ncgm.com">data4apps@ncgm.com</a></li>
            <li style="margin-top: 10px;"><strong>Progressive Uploads:</strong><br>
                <a href="mailto:upload@progressiveagent.com">upload@progressiveagent.com</a></li>
          </ul>
        </div>
        
        <div class="resource-card">
          <h4>üîß Tools & Calculators</h4>
          <p>Helpful insurance tools:</p>
          <ul style="list-style: none; padding: 0;">
            <li><a href="#" onclick="alert('Coming soon!')">Premium Calculator</a></li>
            <li><a href="#" onclick="alert('Coming soon!')">Coverage Estimator</a></li>
            <li><a href="#" onclick="alert('Coming soon!')">Deductible Comparison</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Prompt Manager Tab -->
  <div id="prompts-tab" class="tab-content" style="display: none;">
    <style>
      .prompts-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }
      
      .prompts-header {
        background: white;
        border-radius: 12px;
        padding: 30px;
        margin-bottom: 30px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        text-align: center;
      }
      
      .prompts-toolbar {
        background: white;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        align-items: center;
      }
      
      .prompt-btn {
        background: #667eea;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s;
        font-weight: 500;
      }
      
      .prompt-btn:hover {
        background: #5a67d8;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      }
      
      .prompt-btn.secondary {
        background: #48bb78;
      }
      
      .prompt-btn.secondary:hover {
        background: #38a169;
      }
      
      .prompt-search-box {
        flex: 1;
        min-width: 200px;
      }
      
      .prompt-search-box input {
        width: 100%;
        padding: 12px;
        border: 2px solid #e2e8f0;
        border-radius: 8px;
        font-size: 1rem;
      }
      
      .prompt-filter-bar {
        background: white;
        border-radius: 12px;
        padding: 15px 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        display: flex;
        gap: 15px;
        align-items: center;
        flex-wrap: wrap;
      }
      
      .prompt-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }
      
      .prompt-card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        transition: all 0.3s;
        position: relative;
      }
      
      .prompt-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 16px rgba(0,0,0,0.15);
      }
      
      .favorite-btn {
        position: absolute;
        top: 15px;
        right: 15px;
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        transition: transform 0.2s;
      }
      
      .favorite-btn:hover {
        transform: scale(1.2);
      }
      
      .favorite-btn.active {
        color: #f6ad55;
      }
      
      .prompt-title {
        font-size: 1.2rem;
        font-weight: bold;
        color: #333;
        margin-bottom: 10px;
        padding-right: 40px;
      }
      
      .prompt-content {
        color: #666;
        margin-bottom: 15px;
        line-height: 1.5;
        max-height: 100px;
        overflow: hidden;
      }
      
      .prompt-card-actions {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }
      
      .card-btn {
        padding: 8px 16px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.2s;
      }
      
      .copy-btn {
        background: #667eea;
        color: white;
      }
      
      .copy-btn:hover {
        background: #5a67d8;
      }
      
      .edit-btn {
        background: #4299e1;
        color: white;
      }
      
      .edit-btn:hover {
        background: #3182ce;
      }
      
      .delete-btn {
        background: #f56565;
        color: white;
      }
      
      .delete-btn:hover {
        background: #e53e3e;
      }
      
      .prompt-empty-state {
        text-align: center;
        padding: 60px 20px;
        background: white;
        border-radius: 12px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      
      .prompt-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        z-index: 1000;
        padding: 20px;
      }
      
      .prompt-modal.active {
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .prompt-modal-content {
        background: white;
        border-radius: 12px;
        width: 100%;
        max-width: 600px;
        max-height: 90vh;
        overflow-y: auto;
      }
      
      .prompt-modal-header {
        padding: 20px;
        border-bottom: 1px solid #e2e8f0;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      
      .prompt-modal-close {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: #666;
      }
      
      .prompt-modal-body {
        padding: 20px;
      }
      
      .prompt-form-group {
        margin-bottom: 20px;
      }
      
      .prompt-form-group label {
        display: block;
        margin-bottom: 8px;
        color: #333;
        font-weight: 500;
      }
      
      .prompt-form-group input,
      .prompt-form-group textarea {
        width: 100%;
        padding: 10px;
        border: 2px solid #e2e8f0;
        border-radius: 8px;
        font-size: 1rem;
      }
      
      .prompt-form-group textarea {
        min-height: 150px;
        resize: vertical;
        font-family: inherit;
      }
      
      .prompt-modal-footer {
        padding: 20px;
        border-top: 1px solid #e2e8f0;
        display: flex;
        justify-content: flex-end;
        gap: 10px;
      }
      
      .prompt-toast {
        position: fixed;
        bottom: 30px;
        right: 30px;
        background: #48bb78;
        color: white;
        padding: 16px 24px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        display: none;
        animation: slideInPrompt 0.3s ease;
        z-index: 1001;
      }
      
      .prompt-toast.show {
        display: block;
      }
      
      .prompt-toast.error {
        background: #f56565;
      }
      
      @keyframes slideInPrompt {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
    </style>
    
    <div class="prompts-container">
      <!-- Header -->
      <div class="prompts-header">
        <h1>üìù Prompt Manager</h1>
        <p>Save and organize your AI prompts in one place</p>
      </div>
      
      <!-- Toolbar -->
      <div class="prompts-toolbar">
        <button class="prompt-btn" onclick="openAddPromptModal()">‚ûï Add New Prompt</button>
        <button class="prompt-btn secondary" onclick="exportPrompts()">üì• Download All</button>
        <button class="prompt-btn secondary" onclick="document.getElementById('importPromptFile').click()">üì§ Upload Prompts</button>
        <input type="file" id="importPromptFile" accept=".json" style="display: none;" onchange="importPrompts(event)">
        <div class="prompt-search-box">
          <input type="text" id="promptSearchInput" placeholder="üîç Search prompts..." oninput="renderPrompts()">
        </div>
      </div>
      
      <!-- Filter Bar -->
      <div class="prompt-filter-bar">
        <label>Sort by:</label>
        <select id="promptSortSelect" onchange="renderPrompts()">
          <option value="alphabetical">A-Z (Title)</option>
          <option value="newest">Newest First</option>
          <option value="category">Category</option>
        </select>
        
        <label class="checkbox-label">
          <input type="checkbox" id="promptFavoritesOnly" onchange="renderPrompts()">
          Show Favorites Only
        </label>
      </div>
      
      <!-- Prompts Container -->
      <div id="promptsContainer"></div>
      
      <!-- Empty State -->
      <div class="prompt-empty-state" id="promptEmptyState" style="display: none;">
        <h3>No prompts yet</h3>
        <p>Click "Add New Prompt" to get started!</p>
      </div>
    </div>
    
    <!-- Add/Edit Modal -->
    <div class="prompt-modal" id="promptModal">
      <div class="prompt-modal-content">
        <div class="prompt-modal-header">
          <h2 id="promptModalTitle">Add New Prompt</h2>
          <button class="prompt-modal-close" onclick="closePromptModal()">‚úï</button>
        </div>
        <div class="prompt-modal-body">
          <div class="prompt-form-group">
            <label>Prompt Title *</label>
            <input type="text" id="promptTitleInput" placeholder="Give your prompt a name...">
          </div>
          <div class="prompt-form-group">
            <label>Prompt Content *</label>
            <textarea id="promptContentInput" placeholder="Enter your prompt here..."></textarea>
          </div>
          <div class="prompt-form-group">
            <label>Category (optional)</label>
            <input type="text" id="promptCategoryInput" placeholder="e.g., Email, Social Media, Reports">
          </div>
        </div>
        <div class="prompt-modal-footer">
          <button class="prompt-btn" onclick="closePromptModal()">Cancel</button>
          <button class="prompt-btn" onclick="savePrompt()">Save Prompt</button>
        </div>
      </div>
    </div>
    
    <!-- Toast Notification -->
    <div class="prompt-toast" id="promptToast"></div>
    
    <script>
      // Prompt Manager Data and Functions
      let prompts = JSON.parse(localStorage.getItem('simplePrompts') || '[]');
      let currentEditPromptId = null;
      
      // Initialize prompts when tab is shown
      function initializePrompts() {
        renderPrompts();
      }
      
      function renderPrompts() {
        const container = document.getElementById('promptsContainer');
        const emptyState = document.getElementById('promptEmptyState');
        const searchTerm = document.getElementById('promptSearchInput').value.toLowerCase();
        const sortBy = document.getElementById('promptSortSelect').value;
        const favoritesOnly = document.getElementById('promptFavoritesOnly').checked;
        
        // Filter prompts
        let filtered = prompts.filter(p => {
          const matchesSearch = p.title.toLowerCase().includes(searchTerm) || 
            p.content.toLowerCase().includes(searchTerm) ||
            (p.category || '').toLowerCase().includes(searchTerm);
          const matchesFavorite = !favoritesOnly || p.isFavorite;
          return matchesSearch && matchesFavorite;
        });
        
        // Sort prompts
        filtered.sort((a, b) => {
          if (sortBy === 'alphabetical') {
            return a.title.localeCompare(b.title);
          } else if (sortBy === 'newest') {
            return new Date(b.createdAt) - new Date(a.createdAt);
          } else if (sortBy === 'category') {
            const catA = a.category || 'zzz';
            const catB = b.category || 'zzz';
            if (catA === catB) {
              return a.title.localeCompare(b.title);
            }
            return catA.localeCompare(catB);
          }
          return 0;
        });
        
        if (filtered.length === 0) {
          container.innerHTML = '';
          emptyState.style.display = 'block';
          if (favoritesOnly) {
            emptyState.querySelector('h3').textContent = 'No favorite prompts yet';
            emptyState.querySelector('p').textContent = 'Star some prompts to see them here!';
          } else if (searchTerm) {
            emptyState.querySelector('h3').textContent = 'No prompts found';
            emptyState.querySelector('p').textContent = 'Try a different search term';
          } else {
            emptyState.querySelector('h3').textContent = 'No prompts yet';
            emptyState.querySelector('p').textContent = 'Click "Add New Prompt" to get started!';
          }
          return;
        }
        
        emptyState.style.display = 'none';
        
        container.innerHTML = '<div class="prompt-grid">' + 
          filtered.map(prompt => `
            <div class="prompt-card">
              <button class="favorite-btn ${prompt.isFavorite ? 'active' : ''}" onclick="togglePromptFavorite('${prompt.id}')">
                ${prompt.isFavorite ? '‚≠ê' : '‚òÜ'}
              </button>
              <div class="prompt-title">${escapeHtmlPrompt(prompt.title)}</div>
              ${prompt.category ? `<div style="color: #667eea; font-size: 0.9rem; margin-bottom: 10px;">üìÅ ${escapeHtmlPrompt(prompt.category)}</div>` : ''}
              <div class="prompt-content">${escapeHtmlPrompt(prompt.content)}</div>
              <div class="prompt-card-actions">
                <button class="card-btn copy-btn" onclick="copyPrompt('${prompt.id}')">üìã Copy</button>
                <button class="card-btn edit-btn" onclick="editPrompt('${prompt.id}')">‚úèÔ∏è Edit</button>
                <button class="card-btn delete-btn" onclick="deletePrompt('${prompt.id}')">üóëÔ∏è Delete</button>
              </div>
            </div>
          `).join('') + '</div>';
      }
      
      function togglePromptFavorite(id) {
        const prompt = prompts.find(p => p.id === id);
        if (!prompt) return;
        
        prompt.isFavorite = !prompt.isFavorite;
        localStorage.setItem('simplePrompts', JSON.stringify(prompts));
        renderPrompts();
        showPromptToast(prompt.isFavorite ? 'Added to favorites!' : 'Removed from favorites');
      }
      
      function openAddPromptModal() {
        document.getElementById('promptModalTitle').textContent = 'Add New Prompt';
        document.getElementById('promptTitleInput').value = '';
        document.getElementById('promptContentInput').value = '';
        document.getElementById('promptCategoryInput').value = '';
        currentEditPromptId = null;
        document.getElementById('promptModal').classList.add('active');
      }
      
      function editPrompt(id) {
        const prompt = prompts.find(p => p.id === id);
        if (!prompt) return;
        
        document.getElementById('promptModalTitle').textContent = 'Edit Prompt';
        document.getElementById('promptTitleInput').value = prompt.title;
        document.getElementById('promptContentInput').value = prompt.content;
        document.getElementById('promptCategoryInput').value = prompt.category || '';
        currentEditPromptId = id;
        document.getElementById('promptModal').classList.add('active');
      }
      
      function closePromptModal() {
        document.getElementById('promptModal').classList.remove('active');
      }
      
      function savePrompt() {
        const title = document.getElementById('promptTitleInput').value.trim();
        const content = document.getElementById('promptContentInput').value.trim();
        const category = document.getElementById('promptCategoryInput').value.trim();
        
        if (!title || !content) {
          showPromptToast('Please fill in all required fields', true);
          return;
        }
        
        if (currentEditPromptId) {
          // Edit existing
          const index = prompts.findIndex(p => p.id === currentEditPromptId);
          prompts[index] = { ...prompts[index], title, content, category };
          showPromptToast('Prompt updated successfully!');
        } else {
          // Add new
          const newPrompt = {
            id: Date.now().toString(),
            title,
            content,
            category,
            isFavorite: false,
            createdAt: new Date().toISOString()
          };
          prompts.unshift(newPrompt);
          showPromptToast('Prompt added successfully!');
        }
        
        localStorage.setItem('simplePrompts', JSON.stringify(prompts));
        renderPrompts();
        closePromptModal();
      }
      
      function copyPrompt(id) {
        const prompt = prompts.find(p => p.id === id);
        if (!prompt) return;
        
        navigator.clipboard.writeText(prompt.content).then(() => {
          showPromptToast('Prompt copied to clipboard!');
        }).catch(() => {
          showPromptToast('Failed to copy', true);
        });
      }
      
      function deletePrompt(id) {
        if (!confirm('Are you sure you want to delete this prompt?')) return;
        
        prompts = prompts.filter(p => p.id !== id);
        localStorage.setItem('simplePrompts', JSON.stringify(prompts));
        renderPrompts();
        showPromptToast('Prompt deleted');
      }
      
      function exportPrompts() {
        const dataStr = JSON.stringify(prompts, null, 2);
        const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);
        const link = document.createElement('a');
        link.href = dataUri;
        link.download = `prompts-backup-${new Date().toISOString().split('T')[0]}.json`;
        link.click();
        showPromptToast('Prompts downloaded!');
      }
      
      function importPrompts(event) {
        const file = event.target.files[0];
        if (!file) return;
        
        const reader = new FileReader();
        reader.onload = function(e) {
          try {
            const imported = JSON.parse(e.target.result);
            if (Array.isArray(imported)) {
              imported.forEach(p => {
                if (p.isFavorite === undefined) p.isFavorite = false;
              });
              prompts = [...imported, ...prompts];
              localStorage.setItem('simplePrompts', JSON.stringify(prompts));
              renderPrompts();
              showPromptToast(`Imported ${imported.length} prompts!`);
            }
          } catch (err) {
            showPromptToast('Invalid file format', true);
          }
        };
        reader.readAsText(file);
        event.target.value = '';
      }
      
      function showPromptToast(message, isError = false) {
        const toast = document.getElementById('promptToast');
        toast.textContent = message;
        toast.className = 'prompt-toast show' + (isError ? ' error' : '');
        setTimeout(() => {
          toast.classList.remove('show');
        }, 3000);
      }
      
      function escapeHtmlPrompt(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
      }
      
      // Close modal on Escape key
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && document.getElementById('promptModal').classList.contains('active')) {
          closePromptModal();
        }
      });
    </script>
  </div>

  <!-- PDF Viewer Modal -->
  <div id="pdfModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="pdfTitle"></h3>
        <span class="close" onclick="closePDFModal()">&times;</span>
      </div>
      <div class="modal-body">
        <iframe id="pdfViewer" style="width: 100%; height: 600px; border: none;"></iframe>
      </div>
      <div class="modal-footer">
        <button onclick="downloadCurrentPDF()">‚¨áÔ∏è Download</button>
        <button onclick="printCurrentPDF()">üñ®Ô∏è Print</button>
        <button onclick="emailCurrentPDF()">üìß Email</button>
      </div>
    </div>
  </div>

  <!-- Helper function for downloading HTML files -->
  <script>
    function downloadHtmlFile(elementId, title) {
      const element = document.getElementById(elementId);
      const html = element.innerHTML;
      
      const fullHtml = `
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="UTF-8">
          <title>${title}</title>
        </head>
        <body>
          ${html}
        </body>
        </html>
      `;
      
      const blob = new Blob([fullHtml], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      const fileName = `${title.replace(/\s+/g, '_')}.html`;
      
      a.href = url;
      a.download = fileName;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      showNotification(`Document saved as ${fileName}`, 'success');
    }
  </script>

  <!-- Load external JavaScript -->
  <script src="js/scripts.js"></script>
</body>
</html>
